# InPost Integration - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

## üìö –û–≥–ª—è–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è InPost —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –∫—ñ–ª—å–∫–æ—Ö —Ñ–∞–π–ª—ñ–≤ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ü—ñ–ª–µ–π:

### üöÄ –î–ª—è –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:
1. **`INPOST_–®–í–ò–î–ö–ò–ô_–°–¢–ê–†–¢.md`** - —à–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –¥–ª—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
2. **`–ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø_–Ü–ù–¢–ï–ì–†–ê–¶–Ü–ô.md`** - –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –≤—Å—ñ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

### üîß –î–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º:
3. **`–†–ï–ó–Æ–ú–ï_–í–ò–ü–†–ê–í–õ–ï–ù–¨_INPOST.md`** ‚≠ê - —Ä–µ–∑—é–º–µ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å (–ü–û–ß–ù–Ü–¢–¨ –ó–í–Ü–î–°–ò!)
4. **`–Ü–ù–°–¢–†–£–ö–¶–Ü–Ø_–í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø_INPOST.md`** - –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ 401
5. **`–®–í–ò–î–ö–Ü_–ö–û–ú–ê–ù–î–ò_INPOST.md`** - –∫–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### üìñ –î–æ–¥–∞—Ç–∫–æ–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:
6. **`INPOST_INTEGRATION.md`** - —Ç–µ—Ö–Ω—ñ—á–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó
7. **`database/migrations/fix_inpost_api_key.sql`** - SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ë–î

---

## üî¥ –Ø–∫—â–æ —É –≤–∞—Å –ø–æ–º–∏–ª–∫–∞ "Token is missing or invalid"

### üëâ –ü–û–ß–ù–Ü–¢–¨ –ó–í–Ü–î–°–ò:
1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ **`–†–ï–ó–Æ–ú–ï_–í–ò–ü–†–ê–í–õ–ï–ù–¨_INPOST.md`**
2. –°–ª—ñ–¥—É–π—Ç–µ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º –≤ **`–Ü–ù–°–¢–†–£–ö–¶–Ü–Ø_–í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø_INPOST.md`**
3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–º–∞–Ω–¥–∏ –∑ **`–®–í–ò–î–ö–Ü_–ö–û–ú–ê–ù–î–ò_INPOST.md`**

### –ö–æ—Ä–æ—Ç–∫–æ:
–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º—É, —â–æ –≤ –ø–æ–ª—ñ `api_key` –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è `organization_id`, –∞ –Ω–µ JWT —Ç–æ–∫–µ–Ω!

**–©–æ –∑—Ä–æ–±–∏—Ç–∏:**
1. –û—Ç—Ä–∏–º–∞–π—Ç–µ JWT —Ç–æ–∫–µ–Ω –∑ –ø–∞–Ω–µ–ª—ñ InPost (–¥–æ–≤–≥–∏–π —Ä—è–¥–æ–∫ ~200+ —Å–∏–º–≤–æ–ª—ñ–≤)
2. –û–Ω–æ–≤—ñ—Ç—å `api_key` –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö –∞–±–æ —á–µ—Ä–µ–∑ UI
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å backend

---

## ‚úÖ –Ø–∫—â–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç–µ –≤–ø–µ—Ä—à–µ

### üëâ –ü–û–ß–ù–Ü–¢–¨ –ó–í–Ü–î–°–ò:
1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ **`INPOST_–®–í–ò–î–ö–ò–ô_–°–¢–ê–†–¢.md`**
2. –°–ª—ñ–¥—É–π—Ç–µ 5 –ø—Ä–æ—Å—Ç–∏–º –∫—Ä–æ–∫–∞–º

### –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:
- JWT —Ç–æ–∫–µ–Ω (Organization Token) –∑ –ø–∞–Ω–µ–ª—ñ InPost
- Organization ID (—á–∏—Å–ª–æ–≤–∏–π ID)

---

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
translations-crm/
‚îú‚îÄ‚îÄ INPOST_README.md                    # –¶–µ–π —Ñ–∞–π–ª (–Ω–∞–≤—ñ–≥–∞—Ü—ñ—è)
‚îú‚îÄ‚îÄ –†–ï–ó–Æ–ú–ï_–í–ò–ü–†–ê–í–õ–ï–ù–¨_INPOST.md        # ‚≠ê –†–µ–∑—é–º–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å
‚îú‚îÄ‚îÄ –Ü–ù–°–¢–†–£–ö–¶–Ü–Ø_–í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø_INPOST.md   # –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ –®–í–ò–î–ö–Ü_–ö–û–ú–ê–ù–î–ò_INPOST.md           # –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
‚îú‚îÄ‚îÄ INPOST_–®–í–ò–î–ö–ò–ô_–°–¢–ê–†–¢.md            # –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ INPOST_INTEGRATION.md              # –¢–µ—Ö–Ω—ñ—á–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø_–Ü–ù–¢–ï–ì–†–ê–¶–Ü–ô.md         # –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ database/migrations/
    ‚îî‚îÄ‚îÄ fix_inpost_api_key.sql         # SQL —Å–∫—Ä–∏–ø—Ç
```

---

## üîë –ö–ª—é—á–æ–≤—ñ –ø–æ–Ω—è—Ç—Ç—è

| –ü–æ–ª–µ | –©–æ —Ü–µ | –ü—Ä–∏–∫–ª–∞–¥ | –î–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è |
|------|-------|---------|---------------------|
| **API Key** | JWT —Ç–æ–∫–µ–Ω –¥–ª—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó | `eyJhbGciOiJSUzI...` (200+ chars) | API –∑–∞–ø–∏—Ç–∏ –¥–æ InPost |
| **Organization ID** | –ß–∏—Å–ª–æ–≤–∏–π ID –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó | `124089` | URL –∑–∞–ø–∏—Ç—ñ–≤ |
| **Webhook Secret** | –°–µ–∫—Ä–µ—Ç –¥–ª—è webhook | `my-secret-123` | –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è webhook (–ù–ï API!) |

### ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ!
- `api_key` ‚â† `organization_id`
- `webhook_secret` –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è API –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó!

---

## üõ†Ô∏è –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç (–¥–ª—è –Ω–µ—Ç–µ—Ä–ø–ª—è—á–∏—Ö)

```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–æ—Ç–æ—á–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
docker exec -it crm_translations_db psql -U postgres -d crm_db -c "
SELECT 
  CASE 
    WHEN LENGTH(api_key) > 100 THEN '‚úÖ JWT token OK'
    ELSE '‚ùå NOT a JWT token! Length: ' || COALESCE(LENGTH(api_key)::text, 'NULL')
  END as status,
  organization_id,
  is_enabled
FROM inpost_settings;
"

# 2. –Ø–∫—â–æ –ù–ï –û–ö - –æ–Ω–æ–≤—ñ—Ç—å (–∑–∞–º—ñ–Ω—ñ—Ç—å YOUR_JWT_TOKEN):
docker exec -it crm_translations_db psql -U postgres -d crm_db -c "
UPDATE inpost_settings 
SET api_key = 'YOUR_JWT_TOKEN_FROM_INPOST'
WHERE id = 1;
"

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å
docker-compose restart backend

# 4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏
docker-compose logs -f backend | grep -i inpost
```

---

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

### –Ø–∫—â–æ —â–æ—Å—å –Ω–µ –ø—Ä–∞—Ü—é—î:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `docker-compose logs backend | grep -i inpost`
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ JWT —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `organization_id` –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
4. –î–∏–≤—ñ—Ç—å—Å—è –¥–µ—Ç–∞–ª—å–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é

### –ö–æ—Ä–∏—Å–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:
- [InPost Portal](https://inpost.pl/)
- [InPost API Documentation](https://dokumentacja-inpost.atlassian.net/)
- [Developer Portal](https://developer.inpost.pl/)

---

## üìÖ –Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω

### 2026-02-13: –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ `get_api_key()` –º–µ—Ç–æ–¥
- ‚úÖ –†–æ–∑'—è—Å–Ω–µ–Ω–æ —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ `api_key`, `organization_id` —Ç–∞ `webhook_secret`
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### –†–∞–Ω—ñ—à–µ:
- –ü–æ—á–∞—Ç–∫–æ–≤–∞ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—è InPost —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

---

**–î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 13.02.2026  
**–í–µ—Ä—Å—ñ—è:** 1.1

